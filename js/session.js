piSession=function(){var aX="https://login.pearson.com/v1/piapi/login";var H="4.0.1";var cl="9000000";var cO=null;var a2="pi_op_frame_pearson";var ag="pi_rp_frame";var D="pi_user_id";var aS=aX+"/html/v2/checkSessionFrame.html?v="+H;var b6="fr";var aD=null;var aT=false;var bw=3*1000;var cI=30*60;var ak=5*60;var aM="true";var da={};var c6=/http[s]?:\/\/([^/]+).*/;var aE="*";var bU="login";var bQ="none";var m=false;const bY=4;const cC=/^[a-z A-Z0-9._,-]+$/;var bD=Number("30000");var c5="Almost there!\n\nIt looks the time zone, date, or clock for your device is set incorrectly. Please check and update your date and clock so that they match your time zone. Please see this help article for more information:\n\nhttps://support.pearson.com/getsupport/s/article/XL-MyLab-Course-flashing-or-reloading-constantly";function l(df){return(/true/i).test(df)}var aP=null;var c1=null;var cL=null;var cm=null;var V=function(){var df=(aC!=false)&&(aC==true||ac);var dg="/oidcauthorize";if(df){return aX+dg+"?sesstype="+b6}else{return aX+dg}};var cY=null;var C=false;var c4=true;var ck=true;var b3=false;var b5=20;var bJ=null;var bN="PearsonExtSSOSession";var bt="PearsonExtSSOExpiryTime";var de="false";var aC=de?l(de):null;var ac=null;var c0=Number("");var cS=null;var cg=null;var aI="PiAuthExpiryTime";var bF="PiAccessToken";var ai="PiRefreshToken";var aa="PiAccessTokenExpiresIn";var c="PiAccessTokenTimestamp";var aR="PiUserId";var cR="PiSmsUserId";var aO="PiLastUserActivityTime";var cW="PiIsRememberMe";var cU="PiIdpLoginUrl";var O="PiIdpPartnerName";var aw="PiHomeCountryCode";var bv="PiLang";var cv="PiSessionId";var bj="PiDeviceId";var az="PiImpersonationId";var d="PiIdpLogoutCallback";var a5="PiAuthSessionExpiryTime";var c9="fromDoInitialize";var a8="PearsonCookieConsentGroups";var cE=false;var v="PiInitializationAttemptTimeStamp";var cP=300;var dd="PiClockSkewServerTimeStampKey";var cH="PiServerTimeLastAttemptTimeStampKey";var x=300;var a7=true;var i=false;var cT="iesCode";var cQ="iesError";var ba="login_required";var ab="iesErrorDescription";var ay="access_token";var N="refresh_token";var bf="expires_in";var y="refresh_token_expires_at";var p="piid";var bG="smsid";var j="sessid";var bH="hcc";var b2="lang";var bE="rememberMe";var bl="deviceid";var a9="/showconsent";var bu="initialize";var h="checkSession";var cz="sessionState";var bn="getinitialtoken";var aL="opRedeemOidcCode";var cX="oidcCodeRedeemed";var aJ="oidcCodeRedeemedError";var be="updateuseractivitytime";var aj="getConsent";var br="refresh";var bs="logout";var a6="setoptions";var I="debug";var g="sessionTimingOut";var ci="sessionRejuvenated";var b1="sessionTimedOut";var co="opWebTokenRefresh";var bZ="storeLocallyLastUserActivityTime";var bx="callSessionInfo";var Y="clearLocalStorage";var J="clearOpClientSessionData";var r="clearOpNoClientSessionData";var aA="resetDeferStateToInitTokenCallFlag";var cD=null;var bL=60;var bP=null;var c8=null;var aW=false;var w=null;var cs=null;var bm={};var S=false;var bp=undefined;var T=null;var bh=encodeURIComponent;var cj=window.localStorage;var Q=new RegExp("^.*((iPhone; CPU iPhone OS 1[0-2])|(iPad; CPU OS 1[0-2])|(iPod touch; CPU iPhone OS 1[0-2])|(Macintosh; Intel Mac OS X.*Version\/1[0-2].*Safari)|(Macintosh; Intel Mac OS X 10_14.*Version\/1.*Safari)).*$");var u=Q.test(navigator.userAgent);var af=600;var bW=300;var bk=null;var aZ=false;var c2=true;function bz(dg){var dj=dg||function(){};var di=document.createElement("style");di.type="text/css";di.innerHTML="iframe.hidden {display:none}";document.head.appendChild(di);function dh(dl){var dq=dl.attributes.id;var dn=document.getElementById(dl.targetId)||document.body;var dm=document.getElementById(dq);if(dn&&!dm){var dp=dl.attributes.src;dm=document.createElement("iframe");var dk=null;for(dk in dl.attributes){if(dl.attributes.hasOwnProperty(dk)){dm.setAttribute(dk,dl.attributes[dk])}}dn.appendChild(dm);if(dl.onload){dm.onload=function(){return dl.onload(dq)}}}return dm}var df=function(dk,dl){dh({attributes:{id:dk,src:dl,tabindex:-1,width:0,height:0,"class":"hidden",title:""},onload:dj})};df(a2,aS);dh({attributes:{id:ag,tabindex:-1,width:0,height:0,"class":"hidden",title:""}})}function aY(){cp()}function cp(){var dg=new RegExp("("+(cO==="*"?"\\":"")+cO+")\\.("+bF+"|"+aa+"|"+c+"|"+ai+"|"+aO+"|"+aR+"|"+cR+"|"+cv+"|"+aw+"|"+bv+"|"+bj+"|"+az+"|"+v+"|"+dd+"|"+cW+"|"+a8+"|"+a5+")");for(var df in cj){if(df.match(dg)){cj.removeItem(df)}}}function U(dh){var dg=new RegExp("("+(cO==="*"?"\\":"")+cO+")\\.("+dh+")");for(var df in cj){if(df.match(dg)){cj.removeItem(df);return}}}function aH(df){return document.getElementById(df)}function au(){return document.getElementById(ag)}function o(){return document.getElementById(D)}function ao(df){return cO+"."+df}function q(df){return dc(ao(df))}function aF(df,dg){return B(ao(df),dg)}function bX(){return q(bF)}function a4(){return q(aR)}function by(){return q(cR)}function a1(){return q(az)}function bi(){var df=parseInt(q(aa));return df||0}function bC(){var df=q(a8);return df?decodeURIComponent(df):null}function bA(dg){var df=bq(q(c));if(!df){return null}var dh=c3(bi());if(dg){dh/=2}return new Date(df.getTime()+dh)}function f(){var df=bA(false);if(!df){return true}var dg=Date.now();return(dg>=df.getTime())}function b4(){return q(aO)}function t(){return bq(q(a5))||bq(s(aI))}function bq(df){if(df){return new Date(df)}return null}function c3(df){if(df){return df*1000}return null}function G(df,dh){if(df==null){return false}var dg=new Date();if((df.getTime()-dg.getTime())>dh*1000){return true}cd();return false}function bT(){var dg=bA(true);if(!dg){return null}var df=new Date();var dh=dg.getTime()-df.getTime();if(dh<0){dh=0}return dh}function cn(){if(ak){return ak+(bw/1000)}return null}function bV(df){return Math.floor((Math.random()*df+1))}function K(df){if(!aT){return piSession.Unknown}if(!G(t(),df)){if(!L){return piSession.NoSession}else{return piSession.ClockSkewed}}if(!G(bA(),df)){if(!L){return piSession.NoToken}else{return piSession.ClockSkewed}}return piSession.Success}function ae(){return bm[a2]}function bI(){return !bm[a2]}function a3(){switch(K(0)){case piSession.Success:case piSession.NoToken:return true;default:return false}}function ax(){if(bm[a2]===undefined){return false}return true}function cb(df){var dg={};dg[aO]=b4();ch(df,h,dg);ah()}function cy(){cb(a2)}var bo=null;function ah(df){if(bo&&df){clearInterval(bo);bo=null}if(!bo){bo=setInterval(cy,bw)}}function bd(){if(!bk){bk=setInterval(b0,(bD>=15000)?bD:15000)}}function cK(df){return df||bJ||window.location.href}function cf(dg,df){ad(dg,bU,df)}function a(df){var dg=new URL(df);var dh={};dg.searchParams.forEach(function(dj,di){dh[di]=dj});return dh}function ad(di,df,dh){if(df!==bU){df=bQ}var dg=aV(di,df,dh);window.location.assign(dg)}function aV(di,df,dh){if(!di){di=window.location.href}di=k(di,df);var dg=cY||aP||V();dg=n(dg,"client_id",bh(cO));dg=n(dg,"redirect_uri",bh(di));dg=n(dg,"nonce",bh(cg));dg=n(dg,"prompt",bh(df));if(aW){dg=n(dg,"timedout",bh(aW))}if(cS){dg=n(dg,"lang",bh(cS))}if(dh){dg=n(dg,"create",bh(dh))}for(paramName in da){dg=an(dg,paramName,bh(da[paramName]))}return dg}function ar(dg,dh){var df=aX+a9+"?escrowTicket="+bh(dg)+"&client_id="+bh(cO)+"&login_success_url="+bh(dh);window.location.assign(df)}function cG(df){P(bs,{logoutCallback:df});bK()}function bK(){aY();clearInterval(bk)}function db(dg,dj){var di=document.createElement("form");di.action=dg;di.method="POST";di.acceptCharset="UTF-8";for(var dh in dj){if(dj.hasOwnProperty(dh)){var df=document.createElement("input");df.type="hidden";df.name=dh;df.value=dj[dh];di.appendChild(df)}}document.getElementsByTagName("body")[0].appendChild(di);di.submit()}var bc=function(dk,di,df,dj){if(dk!=""&&di!=""){var dg={};dg.username=dk;dg.password=di;dg.client_id=df;dg.login_success_url=k(dj);dg.auto_login="autologin";var dh=aX+"/autologin";dh=cS?n(dh,"lang",cS):dh;db(dh,dg)}else{cf(dj)}};var F=function(di,dh){if(di!=""){bK();var df={};df.username=di;df.client_id=cO;df.login_success_url=k(dh);var dg=aX+"/autoimpersonate";dg=cS?n(dg,"lang",cS):dg;db(dg,df)}else{cf(dh)}};var al=function(dj,dg,di,dh){var df=aX+"/createSmsSession/";var dl=window.location.href;if(!a3()){cf(dl)}else{var dk={accessToken:bX(),};if(dj!=null){dk.okurl=dj}if(dg!=null){dk.errurl=dg}if(di){dk.siteid=di}if(dh){dk.iscourseaware=dh}if(cO){dk.client_id=cO}db(df,dk)}};var aU=function(dh,di){var df=aX+"/saml/generateResponse?sessionType="+bh(dh)+"&targetUrl="+bh(di);function dg(){if(K(0)==piSession.NoSession){cf(window.location.href)}else{window.location.assign(df)}}cu(dg,b5)};function cF(dg,dh,df){cB(bn,dh,df,bX,{login_success_url:dg})}function bS(dg,df){cB(br,dg,df,bX)}function cq(){if(M){clearTimeout(M);M=null}}function e(){a0(b5)}var M=null;function a0(df){if(df>af||f()){console.log("Giving up retries to refresh access token");return}if(!c4){return}cq();var dh=bT();if(dh==null){return}var dg=dh+bV(250);M=setTimeout(function(){M=null;dh=bT();if(dh==null){return}if(dh>0){a0(df)}else{bS(function(di,dj){if(di==piSession.TimedOut){a0(df+bW)}},df)}},dg)}function cZ(df,dg){au().addEventListener(df,dg,false)}function aG(df,dg){au().removeEventListener(df,dg,false)}function aK(df,dh){var dg=document.createEvent("Event");dg.initEvent(df,true,true);dg.data=dh;au().dispatchEvent(dg)}var at=[];var R={};var ca=function(dl,dg,di){var df="event"+Math.random();function dh(){return R[df]}function dj(){var dm=dh(df);if(dm){if(dm.timeoutTimer!=null){clearTimeout(dm.timeoutTimer)}if(dm.successHandler!=null){piSession.off(df,dm.successHandler)}delete R[df]}}var dk={};R[df]=dk;if(dg){dk.timeoutTimer=setTimeout(function(){dj(df);if(dl){dl(piSession.TimedOut,null)}},dg)}dk.successHandler=function(dn){dj();var dm=dn.data;if(di){dm=di(dm)}if(dl){dl(piSession.Success,dm)}};piSession.on(df,dk.successHandler);return df};function cu(di,df,dh){var dg=ca(di,c3(df),dh);if(!aT){at.push(dg)}else{aK(dg,ae())}}function cB(df,dk,dg,di,dj){var dh=ca(dk,c3(dg),di);ch(aD,df,dj,dh)}function P(df,dh,dg){ch(a2,df,dh,dg)}function ch(dj,dg,dk,dh){var di=aH(dj);dk=dk||{};function df(dn,dl,dp){var dm=q(dl);dp=dp||dl;if(typeof dm!=="undefined"&&dm!==null){dn[dp]=dm}}if(di){df(dk,bF);df(dk,aa);df(dk,c);df(dk,ai);df(dk,aO);df(dk,a5,aI);df(dk,aR);df(dk,cR);df(dk,cv);df(dk,aw);df(dk,bj);df(dk,az);di.contentWindow.postMessage(JSON.stringify({operation:dg,data:dk,eventId:dh}),di.src)}}function cA(dh){var df=dh.data.logoutCallback;if(df){window.location.assign(df)}else{if(c1){if(cm){window.location.assign(cm)}else{var dg=aX+"/showIdpLogout?client_id="+bh(cO)+"&idpPartnerName="+c1;if(aP){dg+="&idpLoginUrl="+aP}if(cS){dg+="&lang="+cS}window.location.assign(dg)}}}}function b9(){var df=aX+"/showIdpLogout?client_id="+bh(cO);if(c1){df+="&idpPartnerName="+c1}if(aP){df+="&idpLoginUrl="+aP}window.location.assign(df)}function aq(df){m=df;P(I,{mode:df})}function cJ(dX){try{var dx=JSON.parse(dX.data);if(typeof(dx)!=="object"){return}}catch(dC){return}var dn={};var dS=(dX.origin).replace(c6,"$1");dn[a2]=aX.replace(c6,"$1");var dA=dx.data;var dv=dx.eventId;var dU=dx.frameId;if(dU===null||dn[dU]!==dS){return}if(m){console.log("===session.js "+dx.operation)}function dR(){aT=true;while(at.length>0){var dY=at.pop();aK(dY,ae())}aK(piSession.SessionStateKnownEvent,ae())}if(dx.operation===cz){var df=false;var dw=false;var dT=q(a5)||s(aI);var dk=q(aR);var dH=dT?dT:dA[aI];var dD=!!dH;var dl=bm[dU];var dP=bp;var dr=dk?dk:dA[aR];var dI=dA[az];var dO=dA[a8];function dg(dZ){var dY=/http[s]?:\/\/([^:\/]+).*/;var d0=dZ.toString().replace(dY,"$1").split(".");return d0.slice(d0.length-2,d0.length).join(".")}if(dD){if(dl==false){df=true}bm[dU]=true;aW=false;aD=dU;if(bX()){bd()}aF(az,dI);aF(a8,dO)}else{if(dl==true){dw=true}bm[dU]=false}var dM=!!dA[c9];var dm=cj.getItem(ao(v));var dG=cE&&dm!=null&&(new Date()-new Date(dm))/1000<cP;if(!dD||!bX()){if(dM&&!dG){var dj=bb(cQ);var dV=bb(ab);var dz=bb(cT);if(dj==null&&dV==null&&dz==null){var dJ=dg(window.location.href);var du=dg(aX);if(dJ==du){i=true;P(bn,{login_success_url:cK()})}else{aF(v,new Date());ad(cK(),bQ);return}}}}var dK=b8(window.location.href);if(dK!==window.location.href){window.history.replaceState({},document.title,dK)}var dq=ae();if(dq){dw=false}else{aD=null;if(C){cf(cK());return}}if(bm[dU]||!dq){function ds(dZ,dY){aF(dY,dA[dY])}var dQ=q(a5);if(typeof dQ!=="undefined"&&bq(dQ)<bq(dH)){ds(a5,dH);ds(dA,bF);ds(dA,aa);ds(dA,c);ds(dA,aR);ds(dA,cR);ds(dA,aw);ds(dA,bv);ds(dA,cv);ds(dA,bj);ds(dA,az);ds(dA,a8)}}dy=Math.max(dy||0,dA[aO]||0);var dW=dA[cU];if(dW){aP=dW}var dh=dA[O];if(dh){c1=dh}var dF=dA[d];if(dF){cm=dF}if(!aT&&(dq||ax())){if(!i){dR()}}bp=bX();var dt=bp;var dN=(dt&&dt!=dP);if(dN){e();aK(piSession.RefreshEvent,dt)}if(df&&bX()){cr();b0();aK(piSession.LoginEvent)}var dp=o();if(dw){bK();cq();aK(piSession.RefreshEvent,null);aK(piSession.LogoutEvent,dA);piSession.hideSessionTimingOutWarningModal(null);if(dp){dp.value=null}T=null}if(dv){aK(dv)}if(dp){T=dp.value}if(!T){if(dp){dp.value=dr}T=dr}else{if(dD&&dr&&(T!="undefined"&&T!==dr)){b9()}}ah()}else{if(dx.operation===aj){var dB=dA.escrowTicket;var dL=dA.login_success_url;ar(dB,dL)}else{if(dx.operation===g){c2=false;aK(piSession.SessionTimingOutEvent,dA)}else{if(dx.operation===ci){c2=true;aK(piSession.SessionRejuvenatedEvent,dA)}else{if(dx.operation===b1){aW=true;bK();aK(piSession.SessionTimedOutEvent,dA)}else{if(dx.operation===cX){var dE=dA[p];if(dE&&!X(dE)){aF(a5,dA[y]);aF(bF,dA[ay]);aF(ai,dA[N]);aF(aa,dA[bf]);aF(c,new Date());aF(aR,dA[p]);aF(cR,dA[bG]);aF(cv,dA[j]);aF(aw,dA[bH]);aF(bj,dA[bl]);aF(bv,dA[b2]);aF(aO,new Date().getTime());aF(cW,dA[bE])}var dK=aN(window.location.href,cT);if(dK!==window.location.href){window.history.replaceState({},document.title,dK)}cb(dU)}else{if(dx.operation===aJ){var dK=aN(window.location.href,cT);if(dK!==window.location.href){window.history.replaceState({},document.title,dK)}ad(cK(),bU)}else{if(dx.operation===co){aF(bF,dA.access_token);aF(ai,dA.refresh_token);aF(aa,dA.expires_in);aF(c,new Date());aF(aR,dA.userId);aF(cR,dA.smsUserId);aF(aw,dA.homeCountryCode);aF(bj,dA.deviceId);aF(cv,dA.sessionId);aF(a5,dA.sessionExpiryTime);if(dA[c9]){aF(aO,(new Date()).getTime());dR();i=false}aK(piSession.RefreshEvent,bX())}else{if(dx.operation===bZ){var dy=dA[aO];if(dy){aF(aO,dy)}var di=dA[cW];if(di!==undefined){aF(cW,di)}if(dA[c9]){cb(dU)}}else{if(dx.operation===Y){bK()}else{if(dx.operation===J){cM(cO)}else{if(dx.operation===r){cM()}else{if(dx.operation===aA){if(dA[c9]){dR();i=false}}}}}}}}}}}}}}}var cM=function(df){var dg=new RegExp("op\\.("+(df==="*"?"\\":"")+df+")\\.(.*)");for(var dh in cj){if(dh.match(dg)){cj.removeItem(dh)}}};var aB=function(){var df=(typeof(cj)!=="undefined");if(df){var dg="__testLocalStorage__";try{cj.setItem(dg,1);cj.removeItem(dg)}catch(dh){df=false}}if(!df){console.log("localStorage support is required. Cannot proceed properly.")}};function B(df,dg){if(typeof(dg)==="undefined"||dg===null){cj.removeItem(df)}else{cj.setItem(df,dg)}}function X(dg){var df=0,di,dh,dj;for(;dh=window.localStorage.key(df);df++){di=dh.split(".");if((di.length==2)&&(dh.endsWith(".PiUserId"))&&(di[0].length==32)&&(cC.test(di[0]))){dj=window.localStorage.getItem(dh);if(dj!==dg){console.log("local session is set up for a different user. Not for ",dg);return true}}}return false}function dc(df){if(!aT&&cj.getItem(ao(a5))<new Date()){return null}return cj.getItem(df)}function b(){window.addEventListener("message",cJ,false);window.addEventListener(piSession.LogoutEvent,cA,false)}function cw(df){alert(df);throw df}function cN(df){alert(df);console.error(df)}var bO=false;var L=false;function cd(){var df=Date.now();bM(function(dg){var dh=JSON.parse(dg);if(dh){if(!a7){aF(dd,dh);aF(cH,Date.now())}var di=Math.abs(dh-df);if(di>Number(cl)){L=true;if(aM){alert(c5)}}}else{L=false}})}function bM(dj){var dh=cj.getItem(ao(dd));var df=Number(cj.getItem(ao(cH)));a7=dh!=null&&((Date.now()-df)/1000)<x;if(!a7){var di=new XMLHttpRequest();di.open("GET",aX+"/servertime",false);var dg="time";di.onload=function(){dg=di.response;try{dg=JSON.parse(dg)}catch(dk){}if(dg.status==="success"){dh=dg.data}else{}};di.send()}dj(dh)}function ct(df,dg){if(bO){cw("piSession.initialize() already called")}if(!df){cw("piSession.initialize() requires clientId")}cO=df;aB();if(dg&&typeof(dg)=="number"){dg={checkSessionMilliseconds:dg}}b7(dg);b();bz(function(di){var dj={client_id:cO,frameId:di,server_root:aX,sessionIdleTimeoutSeconds:cI,sessionIdleTimeoutWarningSeconds:cn(),FrSessionKey:bN,FrSessionExpiryTimeKey:bt,additionalParameters:da,};var dh=bb(cT);if(dh!=null){dj[cT]=dh}ch(di,bu,dj);bB(b3);U(dd);U(cH);if(c0>0){setTimeout(function(){if(bm[di]===undefined){bm[di]=false}},c0)}});bO=true}function b7(dg){dg=dg||{};if(dg.checkSessionMilliseconds){bw=dg.checkSessionMilliseconds}if(dg.sessionIdleTimeoutWarningSeconds!=null){ak=Number(dg.sessionIdleTimeoutWarningSeconds)||0}if(dg.sessionIdleTimeoutSeconds!=null){cI=Number(dg.sessionIdleTimeoutSeconds)||0}if(dg.additionalParameters){da=dg.additionalParameters||{}}if(dg.defaultClockSkewAlert!=null){aM=dg.defaultClockSkewAlert}var di=ak?Math.ceil((bw*4)/1000):0;var df=Math.ceil((bw*2)/1000);var dh=cI-df;if(cI<di){cN("sessionIdleTimeoutSeconds must be at least "+di+" for the current setting of checkSessionMilliseconds.  Setting to minimum allowed.");cI=di}if(ak){if(ak<df){cN("sessionIdleTimeoutWarningSeconds must be at least "+df+" for the current setting of checkSessionMilliseconds.  Disabling warning.");ak=null}else{if(ak>dh){cN("sessionIdleTimeoutWarningSeconds must be no more than "+dh+" for the current setting of sessionIdleTimeoutSeconds and checkSessionMilliseconds.  Disabling warning.");ak=null}}}if(dg.useDefaultIdleTimoutWarningPopup!=null){b3=dg.useDefaultIdleTimoutWarningPopup}if(dg.requireLogin!=null){C=dg.requireLogin}if(dg.autoRefresh!=null){c4=dg.autoRefresh}if(dg.monitorUserActivity!=null){ck=dg.monitorUserActivity}if(dg.sesstype!=null){ac=(dg.sesstype===piSession.SessionTypeForgeRock)}if(dg.idpId!=null){cL=dg.idpId;if(cL){cY=aX+"/federate/"+bh(cL)}else{cY=null}}if(dg.defaultTimeoutSeconds!=null){b5=dg.defaultTimeoutSeconds}if(dg.loginSuccessUrl!=null){bJ=dg.loginSuccessUrl}if(dg.lang!=null){cS=dg.lang}if(dg.avoidReInit!=null){cE=dg.avoidReInit}cg=dg.nonce||"123454321";aQ(ck)}function cr(){if(a3()){var df=new Date().getTime();aF(aO,df);aZ=false;var dg={};dg[aO]=df;ch(aD,be,dg)}}function b0(){if(c2===true&&aZ===true){return}var df={};df[aO]=b4();ch(aD,bx,df);aZ=true}function cV(){z(bL)}function z(df){if(a3()){var dg=(new Date()).getTime()+df*60000;aF(aO,dg);aZ=false;var dh={};dh[aO]=dg;ch(aD,be,dh)}}function aQ(dg){if(dg==S){return}function df(dh){if(dg){window.addEventListener(dh,cr,false)}else{window.removeEventListener(dh,cr,false)}}df("keydown");df("mousedown");df("paste");df("cut");df("wheel");S=dg}function cc(){return S}function cx(df){piSession.showSessionTimingOutWarningModal(df.data)}function Z(df){piSession.hideSessionTimingOutWarningModal(df.data)}function ap(df){piSession.showSessionTimedOutModal(df.data)}function bB(df){var dg=df?cZ:aG;dg(piSession.SessionTimingOutEvent,cx);dg(piSession.SessionRejuvenatedEvent,Z);dg(piSession.SessionTimedOutEvent,ap)}function W(){if(!bP){document.body.insertAdjacentHTML("beforeend","<style>\n.piSessionTimeoutModal {\n\tdisplay: none;\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tfont-family: \'Open Sans\', Calibri, Tahoma, sans-serif;\n    z-index: 999;\n}\n\nbody.piModalShown {\n    overflow: hidden;\n    pointer-events: none;\n}\n\n.piSessionTimeoutModal>div.piModalOverlay {\n\tposition: fixed;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tbackground-color: #252525;\n\topacity: 0.6;\n\tz-index: 1000;\n}\n\n.piSessionTimeoutModal .piModalHeader {\n\tfont-weight: normal;\n\tmargin: 0;\n}\n\n.piSessionTimeoutModal>div.piModalBody {\n\tposition: relative;\n\ttop: 50%;\n\ttransform: translateY(-50%);\n        -ms-transform: translate(0%, -50%); \/* IE 9 *\/\n        -webkit-transform: translate(0%, -50%); \/* Safari and Chrome *\/\n\tbackground-color: #fff;\n\tborder: 1px solid #000;\n\tz-index: 1001;\n\t-webkit-border-radius: 2px;\n\t-moz-border-radius: 2px;\n\tborder-radius: 2px;\n\t-webkit-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n\t-moz-box-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n\tbox-shadow: 0 3px 7px rgba(0, 0, 0, 0.3);\n\t-webkit-background-clip: padding-box;\n\t-moz-background-clip: padding-box;\n\tbackground-clip: padding-box;\n\toutline: none;\n\ttext-align: left;\n\tfont-size: 14px;\n\ttransform: translateY(-50%);\n    pointer-events: auto;\n}\n\n.piSessionTimeoutModal div.piModalActions {\n\ttext-align: right;\n}\n\n.piSessionTimeoutModal div.piModalActions button {\n\theight: 36px;\n\tpadding: 0 12px;\n\tmargin: 4px 8px;\n\t-webkit-border-radius: 2px;\n\t-moz-border-radius: 2px;\n\tborder-radius: 2px;\n\tcolor: #252525;\n\tbackground-color: #e9e9e9;\n\tborder-style: solid;\n\tborder-color: #c7c7c7;\n\tfont-weight: bold;\n}\n\n.piSessionTimeoutModal div.piModalActions button.piModalButtonDefault {\n\tcolor: white;\n\tbackground-color: #047a9c;\n\tborder-style: none;\n}\n\n.piModalSessionTimeLeft {\n\tfont-weight: bold;\n\tfont-size: larger;\n}\n\n@media ( min-width :768px) {\n\t.piSessionTimeoutModal .piModalHeader {\n\t\tfont-size: 24px;\n\t}\n\t.piSessionTimeoutModal>div.piModalBody {\n\t\twidth: 600px;\n\t\tmargin: auto;\n\t\tpadding: 40px;\n\t}\n\t.piSessionTimeoutModal div.piModalContent {\n\t\tpadding: 20px 0 0;\n\t}\n\t.piSessionTimeoutModal div.piModalActions {\n\t\tpadding: 28px 0 0;\n\t}\n}\n\n@media ( min-width :480px) and (max-width:767px) {\n\t.piSessionTimeoutModal .piModalHeader {\n\t\tfont-size: 20px;\n\t}\n\t.piSessionTimeoutModal>div.piModalBody {\n\t\twidth: 440px;\n\t\tmargin: auto;\n\t\tpadding: 20px 24px;\n\t}\n\t.piSessionTimeoutModal div.piModalContent {\n\t\tpadding: 16px 0 0;\n\t}\n\t.piSessionTimeoutModal div.piModalActions {\n\t\tpadding: 24px 0 0;\n        display: flex;\n    flex-wrap: wrap\n\t}\n    .piSessionTimeoutModal div.piModalActions button {\n        flex: 1 0 auto;\n    }\n}\n\n@media ( min-width :1px) and (max-width:479px) {\n\t.piSessionTimeoutModal .piModalHeader {\n\t\tfont-size: 20px;\n\t}\n\t.piSessionTimeoutModal>div.piModalBody {\n\t\twidth: auto;\n\t\tmargin: auto;\n\t\tpadding: 20px 24px;\n\t}\n\t.piSessionTimeoutModal div.piModalContent {\n\t\tpadding: 16px 0 0;\n\t}\n\t.piSessionTimeoutModal div.piModalActions {\n\t\tpadding: 0;\n        display: flex;\n    flex-wrap: wrap\n\t}\n    .piSessionTimeoutModal div.piModalActions button {\n        flex: 1 0 auto;\n    }\n}\n<\/style>\n\n<div id=\"piSessionTimingOutModal\" class=\"piSessionTimeoutModal\">\n  <div class=\"piModalOverlay\" tabindex=\"-1\"><\/div>\n  <div class=\"piModalBody\" role=\"dialog\" aria-labelledby=\"piModalTimingOutTitle\" aria-describedby=\"piModalTimingOutDescription\">\n    <h2 class=\"piModalHeader\" id=\"piModalTimingOutTitle\">Are you still there?<\/h2>\n    <p class=\"piModalContent\" id=\"piModalTimingOutDescription\">Your session will time out in <span class=\"piModalSessionTimeLeft\"><\/span> due to inactivity. Would you like to stay signed in?<\/p>\n    <div class=\"piModalActions\">\n      <button class=\"piSignOut\">Sign Out<\/button>\n      <button class=\"piRecordUserActivity piModalButtonDefault\">Keep me signed in<\/button>\n    <\/div>\n  <\/div>\n<\/div>\n\n<div id=\"piSessionTimedOutModal\" class=\"piSessionTimeoutModal\">\n  <div class=\"piModalOverlay\" tabindex=\"-1\"><\/div>\n  <div class=\"piModalBody\" role=\"dialog\" aria-labelledby=\"piModalTimedOutTitle\" aria-describedby=\"piModalTimedOutDescription\">\n    <h2 class=\"piModalHeader\" id=\"piModalTimedOutTitle\">Session timed out<\/h2>\n    <p class=\"piModalContent\" id=\"piModalTimedOutDescription\">Your session has timed out due to inactivity.<\/p>\n    <div class=\"piModalActions\">\n      <button class=\"piContinue piModalButtonDefault\">Ok<\/button>\n    <\/div>\n  <\/div>\n<\/div>\n");bP=document.getElementById("piSessionTimingOutModal");c8=document.getElementById("piSessionTimedOutModal");document.querySelector("#piSessionTimingOutModal button.piSignOut").onclick=function(df){piSession.logout();piSession.hideSessionTimingOutWarningModal()};document.querySelector("#piSessionTimingOutModal button.piRecordUserActivity").onclick=function(df){piSession.recordUserActivity();piSession.hideSessionTimingOutWarningModal()};document.querySelector("#piSessionTimedOutModal button.piContinue").onclick=function(df){piSession.hideSessionTimedOutModal()}}}var bg=null;var bR=null;var av="keydown";var ce="piModalShown";function E(){bg=document.activeElement}function am(){if(bR){document.removeEventListener(av,bR);bR=null;document.body.classList.remove(ce)}if(bg){bg.focus();bg=null}}function A(df){var dg=df.querySelector(".piModalButtonDefault");bR=function(dn){var dp=9;var dm=27;var di=df.querySelectorAll("button,input,checkbox");var dh=di[0];var dk=di[di.length-1];function dl(){if(document.activeElement===dh){dn.preventDefault();dk.focus()}}function dj(){if(document.activeElement===dk){dn.preventDefault();dh.focus()}}switch(dn.keyCode){case dm:dg.click();break;case dp:if(di.length===1){dn.preventDefault();break}if(dn.shiftKey){dl()}else{dj()}break;default:break}};document.addEventListener(av,bR);document.body.classList.add(ce);dg.focus()}function c7(){if(!bO){cw("piSession.initialize() has not been invoked")}}function bb(dg){var dh=null;var df;(window.onpopstate=function(){var di,dk=/\+/g,dj=/([^&=]+)=?([^&]*)/g,dm=function(dn){return decodeURIComponent(dn.replace(dk," "))},dl=window.location.search.substring(1);df={};while(di=dj.exec(dl)){df[dm(di[1])]=dm(di[2])}})();if(dg in df){dh=df[dg]}return dh}function an(dg,dj,dk){var df=new RegExp("([?|&])"+dj+"=.*?(&|#|$)","i");if(dg.match(df)){return dg}var di="";var dh=dg.indexOf("?")!==-1?"&":"?";if(dg.indexOf("#")!==-1){di=dg.replace(/.*#/,"#");dg=dg.replace(/#.*/,"")}return dg+dh+dj+"="+dk+di}function n(dh,df,di){var dg=new RegExp("([?|&])"+df+"=.*?(&|#|$)","i");if(dh.match(dg)){return dh.replace(dg,"$1"+df+"="+di+"$2")}else{var dk="";var dj=dh.indexOf("?")!==-1?"&":"?";if(dh.indexOf("#")!==-1){dk=dh.replace(/.*#/,"#");dh=dh.replace(/#.*/,"")}return dh+dj+df+"="+di+dk}}function aN(dg,dl){var di=dg.toString().split(/\?([^#]+)/);if(di.length>=2){var dj=encodeURIComponent(dl)+"=";var dk=di[1].split(/[&;]/g);for(var dh=dk.length;dh-->0;){if(dk[dh].lastIndexOf(dj,0)!==-1){dk.splice(dh,1)}}var df=di[0]+(dk.length>0?"?"+dk.join("&"):"");if(di.length>2){df+=di[2]}return df}return dg}function b8(df){var dg=df;dg=aN(dg,cQ);dg=aN(dg,ab);return dg}function k(dg,df){var dh=b8(dg);if(df===bU){U(v)}return dh}var s=function(dh){var dg=dh+"=";var df=document.cookie.split(";");for(var di=0;di<df.length;di++){var dk=df[di];while(dk.charAt(0)==" "){dk=dk.substring(1)}if(dk.indexOf(dg)!=-1){var dj=dk.substring(dg.length,dk.length);if(dj.length>1&&dj[0]=='"'){dj=dj.substring(1,dj.length-1)}return dj}}return null};return{Unknown:"unknown",NoSession:"nosession",NoToken:"notoken",RequiredLifetimeTooLong:"requiredLifetimeTooLong",Success:"success",ClockSkewed:"clockskewed",TimedOut:"timedout",SessionStateKnownEvent:"sessionstateknown",LoginEvent:"login",LogoutEvent:"logout",RefreshEvent:"refresh",RefreshFailedEvent:"refreshFailed",ErrorEvent:"error",SessionTimingOutEvent:"sessionTimingOut",SessionRejuvenatedEvent:"sessionRejuvenated",SessionTimedOutEvent:"sessionTimedOut",SessionTypeForgeRock:b6,initialize:function(df,dg){ct(df,dg)},login:function(di,dj,dk,dh){c7();dh=!!dh;dj=Number(dj)||0;di=cK(di);function dg(){var dl=K(dj);if(dl==piSession.Success){if(dk){dk(dl,bX())}return dl}if(dl==piSession.NoToken){cF(di,dk,b5);return dl}cf(di,dh);return piSession.NoSession}var df=K(0);if(df==piSession.Unknown){cu(dg,null);return df}else{return dg()}},logout:function(df){c7();cG(df)},autologin:function(di,dg,df,dh){c7();bc(di,dg,df,dh)},autoimpersonate:function(dg,df){c7();F(dg,df)},getsmssession:function(di,df,dh,dg){c7();al(di,df,dh,dg)},getRumbaSession:function(df){c7();aU("rumba",df)},getForgeRockSession:function(df){c7();aU(b6,df)},hasValidSession:function(df){c7();return K(df)},getToken:function(dj,di,dg){c7();di=di||0;dg=dg||b5;function df(){if(bX()){if(a3()&&G(bA(),di)){dj(piSession.Success,bX())}else{if(di>bi()){dj(piSession.RequiredLifetimeTooLong,null)}else{bS(dj,dg)}}}else{dj(piSession.NoToken,null)}}function dh(){var dk=K(0);if(!dk||dk==piSession.NoSession){dj(piSession.NoSession,null)}else{df()}}cu(dh,dg)},recordUserActivity:function(){c7();cr()},monitorUserActivity:function(df){c7();aQ(df)},extendUserSession:function(){c7();cV()},currentToken:function(){c7();return bX()},getAuthenticationMethod:function(){c7();if(a3()){try{var dh=bX();if(!dh){return null}dh=dh.split(".");if(dh.length!==3){return null}var df=JSON.parse(atob(dh[1]));return df.am||null}catch(dg){console.error("error while trying to get authentication method.",dg)}}return null},userId:function(){c7();return a4()},piCookiePreferences:function(){c7();return bC()},smsUserId:function(){c7();return by()},impersonationId:function(){c7();return a1()},currentSessionExpiry:function(){c7();return t()},currentTokenExpiry:function(){c7();return bA()},currentLastUserActivityTime:function(){c7();var df=b4();if(df){return new Date(parseInt(df)).toString()}return""},isUserEventMonitoringActive:function(){c7();return cc()},setOptions:function(df){c7();b7(df);ah(true);P(a6,{sessionIdleTimeoutSeconds:cI,sessionIdleTimeoutWarningSeconds:cn()});bB(b3)},clearLocalStorage:function(){cp()},showSessionTimingOutWarningModal:function(dh){c7();var dg=new Date(dh).getTime();function df(){var dl=Math.max(0,dg-new Date().getTime());var dk=new Date(dl).toISOString().substr(11,8);if(dk.startsWith("00:")){dk=dk.substring(3)}document.querySelector("#piSessionTimingOutModal .piModalSessionTimeLeft").innerHTML=dk;return dl}W();piSession.hideSessionTimedOutModal();var di=df();var dj=di-(ak*1000)-500;w=setInterval(function(){df()},1000);cs=setTimeout(function(){cs=null;E();df();bP.style.display="block";A(bP)},dj)},hideSessionTimingOutWarningModal:function(df){c7();if(cs){clearTimeout(cs);cs=null}if(bP&&bP.style.display!=="none"){bP.style.display="none";am()}if(w){clearInterval(w);w=null}},showSessionTimedOutModal:function(df){c7();W();piSession.hideSessionTimingOutWarningModal();E();c8.style.display="block";A(c8)},hideSessionTimedOutModal:function(){c7();if(c8&&c8.style.display!=="none"){c8.style.display="none";am()}},on:function(df,dg){c7();cZ(df,dg)},off:function(df,dg){c7();aG(df,dg)},trigger:function(df,dg){c7();aK(df,dg)},getHomeCountryCode:function(){c7();if(a3()){return q(aw)}else{return""}},getDeviceId:function(){c7();if(a3()){return q(bj)}else{return""}},getPreferredLanguage:function(){c7();if(a3()){return q(bv)}else{return""}},reauth:function(dh,dl,dg,dk){var dj=new XMLHttpRequest();var df=aX+"/reAuthenticateUser";dj.open("POST",df,true);dj.setRequestHeader("Content-Type","application/json");dj.withCredentials=true;dj.onreadystatechange=function(){var dm=dj.response;try{dm=JSON.parse(dm)}catch(dn){console.log(dn)}if(dk&&dj.readyState===bY){dk(dm,dj.status,dj)}};var di=JSON.stringify({accessToken:dh,userName:dl,password:dg});dj.send(di)},getContextId:function(){c7();if(a3()){return q(cv)}else{return""}},isRememberMe:function(){c7();if(a3()){return q(cW)==="true"}else{return null}},setDebugMode:function(df){aq(df)}}}();